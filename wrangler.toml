name = "fitness-rpg"
main = "src/index.ts"
compatibility_date = "2024-01-01"

workers_dev = true
routes = [
  { pattern = "fitness-rpg.iancash.me/*", zone_name = "iancash.me" }
]

# Static assets configuration
[assets]
directory = "public"
binding = "ASSETS"

# Cron trigger for background job processing (every 15 minutes)
[triggers]
crons = ["*/15 * * * *"]

# D1 Database binding
[[d1_databases]]
binding = "DB"
database_name = "fitness-rpg-ts"
database_id = "29ea15e8-d43c-447e-adc8-c2b71371c1b8"

# Environment variables (non-sensitive)
[vars]
STRAVA_CLIENT_ID = "119309"
STRAVA_WEBHOOK_VERIFY_TOKEN = "fitness_rpg_webhook_2026"
FRONTEND_URL = "https://fitness-rpg.iancash.me"

# Build configuration for TypeScript
[build]
command = ""

# Development configuration
[env.dev]
vars = { FRONTEND_URL = "http://localhost:8787" }
